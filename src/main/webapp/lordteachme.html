<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script data-require="angular.js@*" data-semver="1.3.7" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.7/angular.js"></script>


<script>
	'use strict';

	var mainApp = angular.module('mainApp', []);

	mainApp.controller('FileUploadController', function($scope, $http) {

		$scope.document = {};

		$scope.setTitle = function(fileInput) {
			var file = fileInput.value;
			var filename = file.replace(/^.*[\\\/]/, '');
			var title = filename.substr(0, filename.lastIndexOf('.'));
		};

		$scope.uploadFile = function() {
			alert("best");
			var formData = new FormData();
			$scope.dataform = {};
			formData.append('formdata', JSON.stringify($scope.document));
			formData.append("file", file.files[0]);
			formData.append("file1", file1.files[0]);
			$http.post('form/up', formData, {
				transformRequest : function(data, headersGetterFunction) {
					return data;
				},
				headers : {
					'Content-Type' : undefined
				}
			}).success(function(data, status) {
				alert("Success ... " + status);
			}).error(function(data, status) {
				alert("Error ... " + status);
			});
		};
	});
</script>


</head>
<body ng-app="mainApp" ng-controller="FileUploadController">
	<form ng-submit="uploadFile()" class="form-horizontal" enctype="multipart/form-data">
	
		<input type="file"  id="file"/>
		<input type="text" ng-model="document.title"/>
		<input type="file"  id="file1"/>

		<button class="btn btn-primary" type="submit">Submit</button>
	</form>
</body>
</html>